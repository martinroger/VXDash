*$
******************************************************************************************************************************
******************************************************************************************************************************
*
* DEVICE           : AS2333 - Diodes Incorporated
* PACKAGE          : SO-8/MSOP-8 & U-DFN3030-8(Type E)
* DATE             : 17SEP2021
* SIMULATOR        : LTspice XVII
* MODEL TYPE       : AIO
* DATASHEET NUMBER : DS42770 Rev. 3 - 2
* MODEL VERSION    : 1.0
*
******************************************************************************************************************************
******************************************************************************************************************************
*
*DISCLAIMER: This spice model is LTspice compatible, developed in version XVII.
*            If this spice model is simulated in any other spice tool and any error is
*            encountered, please contact our support team at the link below:
*            https://www.diodes.com/about/contact-us/technical-support/
*
******************************************************************************************************************************
******************************************************************************************************************************
*
* DEVICE NOTES:
* The following parameters are modeled:
*   1. OPEN-LOOP GAIN AND PHASE VS. FREQUENCY
*   2. INPUT COMMON-MODE REJECTION RATIO VS. FREQUENCY (CMRR)
*   3. POWER SUPPLY REJECTION RATIO VS. FREQUENCY (PSRR)
*   4. DIFFERENTIAL INPUT Capacitance (Cdiff)
*   5. COMMON-MODE INPUT Capacitance (Ccm)
*   6. OPEN-LOOP OUTPUT IMPEDANCE VS. FREQUENCY (Zout)
*   7. INPUT VOLTAGE NOISE DENSITY VS. FREQUENCY (Vnoise)
*   8. INPUT CURRENT NOISE DENSITY VS. FREQUENCY (Inoise)
*   9. OUTPUT VOLTAGE SWING vs. OUTPUT CURRENT (Claw)
*   10. QUIESCENT CURRENT (Iq)
*   11. SLEW RATE (SR)
*   12. SMALL SIGNAL RESPONSE
*   13. OVERLOAD RECOVERY TIME (tor)
*   14. INPUT BIAS CURRENT (Ib)
*   15. INPUT OFFSET CURRENT (Ios)
*   16. INPUT OFFSET VOLTAGE (Vos)
*   17. INPUT OFFSET VOLTAGE VS. TEMPERATURE (Vos Drift)
*   18. INPUT COMMON-MODE VOLTAGE RANGE (Vcm)
*
******************************************************************************************************************************
******************************************************************************************************************************
.SUBCKT AS2333 +INA -INA OUTA V+ V-
V1          22 0 -20M
V_GRp       32 REF 40
V_GRn       33 REF -160
V4          47 OUTA 0
I_OS        ESDn REF -70P
I_B         ESDp REF 70P
V_ISCp      59 REF 5
V_ISCn      60 REF -25
V_ORn       58 VCLP -7.5
V11         64 57 0
V_ORp       56 VCLP 7.9938
V12         63 55 0
VCM_MIN     67 VEE_B -100M
VCM_MAX     68 VCC_B 100M
I_Q         V+ V- 12U
XU3         VSENSE 23 CL_CLAMP CLAW_CLAMP 24 CL_CLAMP CLAMP REF AOL_0
GVCCS1      VEE_CLP 0 VEE_CLP_J1 22  -1M
R13         0 VEE_CLP R_NOISELESS 1K
G3          VCC_CLP 0 VCC_CLP_J1 0  -1M
R14         0 VCC_CLP R_NOISELESS 1K
C10         REF 28 1F
C11         29 REF 1F
R28         30 28 R_NOISELESS 1M
R27         31 29 R_NOISELESS 1M
R24         REF 30 R_NOISELESS 1
R25         31 REF R_NOISELESS 1
R23         VEE_CLP REF R_NOISELESS 1G
R26         VCC_CLP REF R_NOISELESS 1G
XCLAW_AMP   VCC_CLP VEE_CLP VOUT_S REF 31 30 CLAMP_AMP_LO_0
XCLAW_SRC   29 28 CLAW_CLAMP REF VCCS_LIM_3_0
XU8         VEE_CLP_J1 VEE_B VIMON_mA CLAWn_0
XU2         VCC_CLP_J1 VCC_B VIMON_mA CLAWp_0
R15         0 VIMON_mA R_NOISELESS 1
GVCCS3      VIMON_mA 0 VIMON 0  -1M
XGR_AMP     32 33 34 REF 35 36 CLAMP_AMP_HI_0
R39         32 REF R_NOISELESS 1G
R37         33 REF R_NOISELESS 1G
R42         VSENSE 34 R_NOISELESS 1M
C19         34 REF 1F
R38         35 REF R_NOISELESS 1
R36         REF 36 R_NOISELESS 1
R40         35 37 R_NOISELESS 1M
R41         36 38 R_NOISELESS 1M
C17         37 REF 1F
C18         REF 38 1F
XGR_SRC     37 38 CLAMP REF VCCS_LIM_GR_0
XCL_SRC     39 40 CL_CLAMP REF VCCS_LIM_4_0
XU7         41 42 VOS_DRIFT_0
XU6         REF ESDp 43 CMRR_0
XU5         REF VCC_B 44 PSRRp_0
XU4         REF VEE_B 45 PSRRn_0
XIn11       ESDn REF C_NOISE_0
H1          46 REF V4 1K
S7          V- OUTA V- OUTA  S_VSWITCH_1
S6          OUTA V+ OUTA V+  S_VSWITCH_1
R12         REF 48 R_NOISELESS 1G
R18         48 VOUT_S R_NOISELESS 100
C7          VOUT_S REF 1N
E5          48 REF OUTA REF  1
C13         VIMON REF 1N
R33         46 VIMON R_NOISELESS 100
R11         REF 46 R_NOISELESS 1G
XU1         CL_CLAMP REF 47 SW_OL Zout_0
R47         49 VCLP R_NOISELESS 100
C24         VCLP REF 1P
E4          49 REF CL_CLAMP REF  1
R58         41 50 R_NOISELESS 1K
Xe_n        42 ESDp V_NOISE_0
S5          V- ESDp V- ESDp  S_VSWITCH_1
S4          V- ESDn V- ESDn  S_VSWITCH_1
S2          ESDn V+ ESDn V+  S_VSWITCH_1
S3          ESDp V+ ESDp V+  S_VSWITCH_1
C29         51 REF 1P
R78         52 51 R_NOISELESS 100
C28         53 REF 1P
R77         54 53 R_NOISELESS 100
R76         REF 55 R_NOISELESS 1
G16         55 REF 56 REF  -1
R75         57 REF R_NOISELESS 1
G14         57 REF 58 REF  -1
Xi_np       REF 42 C_NOISE_0
XIQp        VIMON REF V+ REF VCCS_LIMIT_IQ_0
XIQn        REF VIMON REF V- VCCS_LIMIT_IQ_0
C_DIFF      ESDp ESDn 2P
XCL_AMP     59 60 VIMON REF 61 62 CLAMP_AMP_LO_0
S8          CLAMP 63 CLAMP 63  S_VSWITCH_2
S9          64 CLAMP 64 CLAMP  S_VSWITCH_2
R32         61 REF R_NOISELESS 1
R21         REF 62 R_NOISELESS 1
R29         61 39 R_NOISELESS 1M
R30         62 40 R_NOISELESS 1M
C9          39 REF 1F
C8          REF 40 1F
R22         59 REF R_NOISELESS 1G
R20         REF 60 R_NOISELESS 1G
H2          54 REF V11 -1
H3          52 REF V12 1
C12         SW_OL REF 1P
R51         65 SW_OL R_NOISELESS 100
R31         65 REF R_NOISELESS 1
XOL_SENSE   REF 65 53 51 OL_SENSE_0
C4          24 REF 1F
R10         24 66 R_NOISELESS 1M
R9          REF 67 R_NOISELESS 1G
R7          68 REF R_NOISELESS 1G
R8          REF 66 R_NOISELESS 1
XVCM_CLAMP  69 REF 66 REF 68 67 VCCS_EXT_LIM_0
E1          REF 0 70 0  1
R89         VEE_B 0 R_NOISELESS 1
R6          71 VEE_B R_NOISELESS 1M
C3          71 0 1F
R60         70 71 R_NOISELESS 1MEG
C14         70 0 1u
R5          70 0 R_NOISELESS 1G
R59         72 70 R_NOISELESS 1MEG
C2          72 0 1F
R4          VCC_B 72 R_NOISELESS 1M
R79         VCC_B 0 R_NOISELESS 1
G18         VEE_B 0 V- 0  -1
G17         VCC_B 0 V+ 0  -1
R67         73 69 R_NOISELESS 1K
G1          69 73 44 45  -1M
R3          23 ESDn R_NOISELESS 1M
R2          73 50 R_NOISELESS 1M
G5          50 41 43 REF  -1M
C_CMn       ESDn REF 4P
C_CMp       REF ESDp 4P
R53         ESDn REF R_NOISELESS 1G
R52         REF ESDp R_NOISELESS 1G
R1          -INA ESDn R_NOISELESS 10M
R34         +INA ESDp R_NOISELESS 10M
.MODEL R_NOISELESS RES ( TCE=0 T_ABS=-273.15)
.MODEL S_VSWITCH_1 VSWITCH (RON=50 ROFF=1G VON=500M VOFF=100M)
.MODEL S_VSWITCH_2 VSWITCH (RON=10M ROFF=1T VON=1M VOFF=0)
.ENDS AS2333
*$
.SUBCKT AOL_0 VSENSE -INA CL_CLAMP CLAW_CLAMP +INA OUTA CLAMP REF
R6          74 REF R_NOISELESS 50K
GVCCS2      76 REF 75 REF  -1.2
C3          76 74 31.83P
R5          74 76 R_NOISELESS 10K
R4          76 REF R_NOISELESS 1
GVCCS1      75 REF 77 REF  -1U
R3          REF 75 R_NOISELESS 1MEG
C2          75 REF 10F
G7          77 REF VSENSE REF  -1U
R69         REF 77 R_NOISELESS 1MEG
C25         77 REF 150F
GVCCS10     78 REF 74 REF  -2
C33         78 79 1.592N
R93         79 REF R_NOISELESS 10K
R94         79 78 R_NOISELESS 10K
R95         78 REF R_NOISELESS 1
C1          CLAMP REF 1.75U
XU2         80 REF REF CLAMP VCCS_LIM_AOL_2_0
G8          CLAW_CLAMP REF 79 REF  -1M
R2          REF CLAMP R_NOISELESS 1MEG
R1          REF 80 R_NOISELESS 1MEG
XU1         +INA -INA REF 80 VCCS_LIM_AOL_1_0
R62         REF OUTA R_NOISELESS 1K
G9          OUTA REF CLAW_CLAMP REF  -1M
R45         REF CLAW_CLAMP R_NOISELESS 1K
R43         REF VSENSE R_NOISELESS 1K
G15         VSENSE REF CLAMP REF  -1M
.MODEL R_NOISELESS RES ( TCE=0 T_ABS=-273.15)
.ENDS AOL_0
*$
.SUBCKT CLAWn_0 VEE_CLP VEE_B VIMON
ECS1        Iout_m_Clawn 0 VALUE = {-V(VIMON,0)}
ECS14       VEE_CLP 0 VALUE = {LIMIT(IF(V(Iout_m_Clawn,0)>V(Iout_br_Clawn,0),V(Line_2_Clawn,0),V(Line_1_Clawn,0)),V(VEE_B,0),0)}
ECS13       C2_Clawn 0 VALUE = {(V(M1_Clawn,0)-V(M2_Clawn,0))*V(Iout_br_Clawn,0)+V(VEE_B,0)}
ECS12       Line_2_Clawn 0 VALUE = {(V(M2_Clawn,0)*V(Iout_m_Clawn,0))+V(C2_Clawn,0)}
ECS11       Line_1_Clawn 0 VALUE = {(V(M1_Clawn,0)*V(Iout_m_Clawn,0))+V(VEE_B,0)}
ECS10       M2_Clawn 0 VALUE = {77.29*V(VEE_B,0)+249.56}
GVCCS2      Iout_br_Clawn 0 88 0  -1M
R13         0 Iout_br_Clawn R_NOISELESS 1
ECS9        88 0 VALUE = {-0.54*V(VEE_B,0)+3.514}
ECS8        M1_Clawn 0 VALUE = {34.05*V(VEE_B,0)+128.645}
.MODEL R_NOISELESS RES ( TCE=0 T_ABS=-273.15)
.ENDS CLAWn_0
*$
.SUBCKT CLAWp_0 VCC_CLP VCC_B VIMON
ECS8        Iout_m 0 VALUE = {V(VIMON,0)}
ECS6        C2 0 VALUE = {(V(M1,0)-V(M2,0))*V(Iout_br,0)+V(VCC_B,0)}
ECS3        VCC_CLP 0 VALUE = {LIMIT(IF(V(Iout_m,0)>V(Iout_br,0),V(Line_2,0),V(Line_1,0)),V(VCC_B,0),0)}
ECS7        Line_2 0 VALUE = {(V(M2,0)*V(Iout_m,0))+V(C2,0)}
ECS5        Line_1 0 VALUE = {(V(M1,0)*V(Iout_m,0))+V(VCC_B,0)}
ECS4        M2 0 VALUE = {-2.41*1E3*V(VCC_B,0)+(1.029*1E3)}
GVCCS1      Iout_br 0 96 0  -1M
R35         0 Iout_br R_NOISELESS 1
ECS2        96 0 VALUE = {0.97*V(VCC_B,0)+1.85}
ECS1        M1 0 VALUE = {43.243*V(VCC_B,0)-238.918}
.MODEL R_NOISELESS RES ( TCE=0 T_ABS=-273.15)
.ENDS CLAWp_0
*$
.SUBCKT CMRR_0 REF +INA OUTA
R65         REF OUTA R_NOISELESS 16.6666666667MEG
C23         OUTA 97 15.915F
R64         97 OUTA R_NOISELESS 100MEG
GVCCS7      97 REF 98 REF  -7
R63         REF 97 R_NOISELESS 1
R48         REF 98 R_NOISELESS 571.4318
C1          98 99 3.9789N
R49         99 98 R_NOISELESS 100MEG
G12         99 REF +INA REF  -175M
Rsrc1       REF 99 R_NOISELESS 1
.MODEL R_NOISELESS RES ( TCE=0 T_ABS=-273.15)
.ENDS CMRR_0
*$
.SUBCKT PSRRp_0 REF VCC_B OUTA
R88         REF OUTA R_NOISELESS 1
GVCCS5      OUTA REF 100 REF  -1
C31         101 REF 159.2P
R87         100 101 R_NOISELESS 10K
R86         100 102 R_NOISELESS 30K
R85         REF 102 R_NOISELESS 1
GVCCS4      102 REF 103 REF  -2.308
R84         REF 103 R_NOISELESS 76.47MEG
C30         103 104 1.224P
R83         104 103 R_NOISELESS 100MEG
R82         REF 104 R_NOISELESS 1
GVCCS3      104 REF 105 REF  -1
R54         REF 105 R_NOISELESS 500
C15         105 106 636.6P
R55         106 105 R_NOISELESS 100MEG
G13         106 REF VCC_B REF  -200M
Rsrc2       REF 106 R_NOISELESS 1
.MODEL R_NOISELESS RES ( TCE=0 T_ABS=-273.15)
.ENDS PSRRp_0
*$
.SUBCKT PSRRn_0 REF VEE_B OUTA
R88         REF OUTA R_NOISELESS 1
GVCCS5      OUTA REF 107 REF  -1
C31         108 REF 159.2P
R87         107 108 R_NOISELESS 10K
R86         107 109 R_NOISELESS 30K
R85         REF 109 R_NOISELESS 1
GVCCS4      109 REF 110 REF  -2.308
R84         REF 110 R_NOISELESS 76.47MEG
C30         110 111 1.224P
R83         111 110 R_NOISELESS 100MEG
R82         REF 111 R_NOISELESS 1
GVCCS3      111 REF 112 REF  -1
R54         REF 112 R_NOISELESS 500
C15         112 113 636.6P
R55         113 112 R_NOISELESS 100MEG
G13         113 REF VEE_B REF  -200M
Rsrc2       REF 113 R_NOISELESS 1
.MODEL R_NOISELESS RES ( TCE=0 T_ABS=-273.15)
.ENDS PSRRn_0
*$
.SUBCKT Zout_0 +INA REF OUTA SW_OL
XVCCS_LIM_ZO 116 REF REF 117 VCCS_LIM_ZO_0
S1          118 119 SW_OL REF  S_VSWITCH_1
G11         121 REF 120 REF  -1.3
R101        121 REF R_NOISELESS 1
R100        122 121 R_NOISELESS 9.0402984K
R99         122 123 R_NOISELESS 10K
C35         123 REF 16.753P
GB1         124 REF 122 REF  -1
R98         124 REF R_NOISELESS 1
R97         116 124 R_NOISELESS 10K
R96         116 REF R_NOISELESS 126.68M
C34         124 116 1.445P
R95         125 REF R_NOISELESS 1
R94         120 125 R_NOISELESS 10K
R93         120 REF R_NOISELESS 32.785714K
C33         125 120 80.499P
GVCCS10     125 REF 126 REF  -1
GVCCS9      127 REF 119 REF  -112.0365
R92         127 REF R_NOISELESS 1
R91         126 127 R_NOISELESS 3.2031067259MEG
R90         126 128 R_NOISELESS 10K
C32         128 REF 800.62P
R73         117 REF R_NOISELESS 1
G10         118 REF +INA OUTA  -89
C26         118 119 89.927U
R72         119 REF R_NOISELESS 90.0605
R71         119 118 R_NOISELESS 10K
Rdummy      REF OUTA R_NOISELESS 20K
R70         OUTA 117 R_NOISELESS 200K
Rdc1        118 REF R_NOISELESS 1
.MODEL S_VSWITCH_1 VSWITCH (RON=1M ROFF=1G VON=900M VOFF=800M)
.MODEL R_NOISELESS RES ( TCE=0 T_ABS=-273.15)
.ENDS Zout_0
*$
.SUBCKT CLAMP_AMP_LO_0  VC+ VC- VIN COM VO+ VO-
.PARAM G=1
GVO+ COM VO+ VALUE = {IF(V(VIN,COM)>V(VC+,COM),((V(VIN,COM)-V(VC+,COM))*G),0)}
GVO- COM VO- VALUE = {IF(V(VIN,COM)<V(VC-,COM),((V(VC-,COM)-V(VIN,COM))*G),0)}
.ENDS CLAMP_AMP_LO_0
*$
.SUBCKT VCCS_LIM_3_0  VC+ VC- IOUT+ IOUT-
.PARAM GAIN = 1
.PARAM IPOS = 0.08e3
.PARAM INEG = -0.32e3
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIM_3_0
*$
.SUBCKT CLAMP_AMP_HI_0  VC+ VC- VIN COM VO+ VO-
.PARAM G=10
GVO+ COM VO+ VALUE = {IF(V(VIN,COM)>V(VC+,COM),((V(VIN,COM)-V(VC+,COM))*G),0)}
GVO- COM VO- VALUE = {IF(V(VIN,COM)<V(VC-,COM),((V(VC-,COM)-V(VIN,COM))*G),0)}
.ENDS CLAMP_AMP_HI_0
*$
.SUBCKT VCCS_LIM_GR_0  VC+ VC- IOUT+ IOUT-
.PARAM GAIN = 1
.PARAM IPOS = 0.5e3
.PARAM INEG = -0.5e3
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIM_GR_0
*$
.SUBCKT VCCS_LIM_4_0  VC+ VC- IOUT+ IOUT-
.PARAM GAIN = 1
.PARAM IPOS = 0.16e3
.PARAM INEG = -0.64e3
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIM_4_0
*$
.SUBCKT VOS_DRIFT_0  VOS+ VOS-
.PARAM DC = 3E-6
.PARAM POL = 1
.PARAM DRIFT = 20E-09
E1 VOS+ VOS- VALUE={DC+POL*DRIFT*(TEMP-27)}
.ENDS VOS_DRIFT_0
*$
.SUBCKT C_NOISE_0  1 2
.PARAM NVRF=100
.PARAM RNVF={1.184*PWR(NVRF,2)}
E1 3 0 5 0 10
R1 5 0 {RNVF}
R2 5 0 {RNVF}
G1 1 2 3 0 1E-6
.ENDS C_NOISE_0
*$
.SUBCKT V_NOISE_0  1 2
.PARAM NVR=80
.PARAM RNV={1.184*PWR(NVR,2)}
R4 5 0 {RNV}
R5 5 0 {RNV}
E3 1 2 5 0 10
.ENDS V_NOISE_0
*$
.SUBCKT VCCS_LIMIT_IQ_0  VC+ VC- IOUT+ IOUT-
.PARAM GAIN = 1E-3
G1 IOUT- IOUT+ VALUE={IF( (V(VC+,VC-)<=0),0,GAIN*V(VC+,VC-) )}
.ENDS VCCS_LIMIT_IQ_0
*$
.SUBCKT OL_SENSE_0  COM SW+ OLN  OLP
GSW+ COM SW+ VALUE = {IF((V(OLN,COM)>10E-3 | V(OLP,COM)>10E-3),1,0)}
.ENDS OL_SENSE_0
*$
.SUBCKT VCCS_EXT_LIM_0  VIN+ VIN- IOUT- IOUT+ VP+ VP-
.PARAM GAIN = 1
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VIN+,VIN-),V(VP-,VIN-), V(VP+,VIN-))}
.ENDS VCCS_EXT_LIM_0
*$
.SUBCKT VCCS_LIM_AOL_2_0  VC+ VC- IOUT+ IOUT-
.PARAM GAIN = 3.795E-02
.PARAM IPOS = 0.21
.PARAM INEG = -0.21
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIM_AOL_2_0
*$
.SUBCKT VCCS_LIM_AOL_1_0  VC+ VC- IOUT+ IOUT-
.PARAM GAIN = 1E-4
.PARAM IPOS = .5
.PARAM INEG = -.5
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIM_AOL_1_0
*$
.SUBCKT VCCS_LIM_ZO_0   VC+ VC- IOUT+ IOUT-
.PARAM GAIN = 78939.8006
.PARAM IPOS = 2E6
.PARAM INEG = -10E6
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIM_ZO_0
*$