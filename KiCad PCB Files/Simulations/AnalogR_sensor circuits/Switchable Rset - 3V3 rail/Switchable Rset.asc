Version 4
SHEET 1 1164 1540
WIRE 448 -528 448 -560
WIRE 656 -528 448 -528
WIRE 448 -448 448 -528
WIRE 656 -448 656 -528
WIRE 448 -288 448 -368
WIRE 112 -272 80 -272
WIRE 288 -272 192 -272
WIRE 400 -272 368 -272
WIRE 448 -144 448 -192
WIRE 656 -144 656 -368
WIRE 656 -144 448 -144
WIRE 448 -64 448 -144
WIRE 448 -64 208 -64
WIRE 16 32 16 0
WIRE -224 96 -224 64
WIRE 272 112 272 16
WIRE 208 128 208 -64
WIRE 240 128 208 128
WIRE 448 128 448 -64
WIRE 400 144 304 144
WIRE 16 160 16 112
WIRE 48 160 16 160
WIRE 240 160 48 160
WIRE 16 192 16 160
WIRE 272 192 272 176
WIRE -224 208 -224 176
WIRE 448 288 448 224
WIRE 656 288 448 288
WIRE 16 304 16 272
WIRE 448 368 448 288
WIRE 448 528 448 432
WIRE 640 528 448 528
WIRE 448 560 448 528
WIRE 448 672 448 640
FLAG 16 0 Vdd
FLAG 16 304 0
FLAG 48 160 Vref
FLAG 272 16 Vdd
FLAG 272 192 0
FLAG 448 672 0
FLAG 448 -560 Vdd
FLAG 448 -64 Vset
FLAG 640 528 Vsensor
FLAG -224 64 Vdd
FLAG -224 208 0
FLAG 656 288 Vadc
FLAG 80 -272 0
SYMBOL res 0 16 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMATTR SpiceLine tol=1
SYMBOL res 0 176 R0
SYMATTR InstName R3
SYMATTR Value 330k
SYMATTR SpiceLine tol=1
SYMBOL res 432 544 R0
SYMATTR InstName Rsensor
SYMATTR Value {Rsense}
SYMATTR SpiceLine tol=1
SYMBOL res 432 -464 R0
SYMATTR InstName RsetLowR
SYMATTR Value 3.9
SYMATTR SpiceLine tol=1
SYMBOL schottky 432 368 R0
SYMATTR InstName D1
SYMATTR Value PMEG3010BEA
SYMBOL voltage -224 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=10m
SYMATTR InstName V1
SYMATTR Value 3.3
SYMBOL pmos 400 224 M180
SYMATTR InstName M1
SYMATTR Value BSS84
SYMBOL OpAmps\\AD8542 272 80 R0
SYMATTR InstName U1
SYMBOL pmos 400 -192 M180
SYMATTR InstName M3
SYMATTR Value BSS84
SYMBOL res 384 -288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 100k
SYMBOL res 640 -464 R0
SYMATTR InstName RsetHighR
SYMATTR Value 91
SYMATTR SpiceLine tol=1
SYMBOL voltage 208 -272 R90
WINDOW 123 0 0 Left 0
WINDOW 39 80 15 VRight 2
WINDOW 0 -51 45 VRight 2
WINDOW 3 48 61 VRight 2
SYMATTR SpiceLine Rser=10m
SYMATTR InstName VcaliberSelect
SYMATTR Value 0
TEXT 32 416 Left 2 !.step param Rsense 1 1001 10
TEXT 32 448 Left 2 !.op
