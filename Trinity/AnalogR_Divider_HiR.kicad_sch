(kicad_sch (version 20230121) (generator eeschema)

  (uuid 24e6fbd0-871a-4f48-bc3f-90ea5ed0f746)

  (paper "A4")

  (title_block
    (title "High R sensing circuit")
    (date "2023-05-01")
    (rev "1.2")
    (comment 1 "https://github.com/martinroger/VXDash")
    (comment 2 "https://cadlab.io/projects/vxdash")
  )

  (lib_symbols
    (symbol "Device:R" (pin_numbers hide) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "R" (at 2.032 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "R" (at 0 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at -1.778 0 90)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "R res resistor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Resistor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "R_*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "R_0_1"
        (rectangle (start -1.016 -2.54) (end 1.016 2.54)
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
      )
      (symbol "R_1_1"
        (pin passive line (at 0 3.81 270) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Diode:PMEG3010EH" (pin_numbers hide) (pin_names hide) (in_bom yes) (on_board yes)
      (property "Reference" "D" (at 0 2.54 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "PMEG3010EH" (at 0 -2.54 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "Diode_SMD:D_SOD-123F" (at 0 -4.445 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "https://assets.nexperia.com/documents/data-sheet/PMEG3010EH_EJ_ET.pdf" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "forward voltage diode" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "30V, 1A very low Vf MEGA Schottky barrier rectifier, SOD-123F" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "D*SOD?123F*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "PMEG3010EH_0_1"
        (polyline
          (pts
            (xy 1.27 0)
            (xy -1.27 0)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 1.27 1.27)
            (xy 1.27 -1.27)
            (xy -1.27 0)
            (xy 1.27 1.27)
          )
          (stroke (width 0.2032) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -1.905 0.635)
            (xy -1.905 1.27)
            (xy -1.27 1.27)
            (xy -1.27 -1.27)
            (xy -0.635 -1.27)
            (xy -0.635 -0.635)
          )
          (stroke (width 0.2032) (type default))
          (fill (type none))
        )
      )
      (symbol "PMEG3010EH_1_1"
        (pin passive line (at -3.81 0 0) (length 2.54)
          (name "K" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 3.81 0 180) (length 2.54)
          (name "A" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Transistor_BJT:BC807" (pin_names (offset 0) hide) (in_bom yes) (on_board yes)
      (property "Reference" "Q" (at 5.08 1.905 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "BC807" (at 5.08 0 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "Package_TO_SOT_SMD:SOT-23" (at 5.08 -1.905 0)
        (effects (font (size 1.27 1.27) italic) (justify left) hide)
      )
      (property "Datasheet" "https://www.onsemi.com/pub/Collateral/BC808-D.pdf" (at 0 0 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "ki_keywords" "PNP Transistor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "0.8A Ic, 45V Vce, PNP Transistor, SOT-23" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "SOT?23*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "BC807_0_1"
        (polyline
          (pts
            (xy 0.635 0.635)
            (xy 2.54 2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0.635 -0.635)
            (xy 2.54 -2.54)
            (xy 2.54 -2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0.635 1.905)
            (xy 0.635 -1.905)
            (xy 0.635 -1.905)
          )
          (stroke (width 0.508) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 2.286 -1.778)
            (xy 1.778 -2.286)
            (xy 1.27 -1.27)
            (xy 2.286 -1.778)
            (xy 2.286 -1.778)
          )
          (stroke (width 0) (type default))
          (fill (type outline))
        )
        (circle (center 1.27 0) (radius 2.8194)
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
      )
      (symbol "BC807_1_1"
        (pin input line (at -5.08 0 0) (length 5.715)
          (name "B" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 2.54 -5.08 90) (length 2.54)
          (name "E" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 2.54 5.08 270) (length 2.54)
          (name "C" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "power:GND" (power) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (at 0 -6.35 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Value" "GND" (at 0 -3.81 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "global power" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Power symbol creates a global label with name \"GND\" , ground" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "GND_0_1"
        (polyline
          (pts
            (xy 0 0)
            (xy 0 -1.27)
            (xy 1.27 -1.27)
            (xy 0 -2.54)
            (xy -1.27 -1.27)
            (xy 0 -1.27)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "GND_1_1"
        (pin power_in line (at 0 0 270) (length 0) hide
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
      )
    )
  )

  (junction (at 148.59 82.55) (diameter 0) (color 0 0 0 0)
    (uuid 3abf3884-73f8-4998-bb0a-c0e84a708478)
  )
  (junction (at 121.92 90.17) (diameter 0) (color 0 0 0 0)
    (uuid 484429e2-f17e-4597-b557-a7f021f85176)
  )
  (junction (at 121.92 57.15) (diameter 0) (color 0 0 0 0)
    (uuid 4f9925f5-c530-4caa-adfb-92829808b1d7)
  )

  (wire (pts (xy 121.92 90.17) (xy 121.92 97.79))
    (stroke (width 0) (type default))
    (uuid 12b2d281-9c6e-4e34-a93a-0edfe42b2db6)
  )
  (wire (pts (xy 148.59 57.15) (xy 121.92 57.15))
    (stroke (width 0) (type default))
    (uuid 2cd08819-f92f-43bd-b576-816a002875ee)
  )
  (wire (pts (xy 121.92 87.63) (xy 121.92 90.17))
    (stroke (width 0) (type default))
    (uuid 38724260-d195-4a2d-a2e0-c04419137da0)
  )
  (wire (pts (xy 129.54 82.55) (xy 148.59 82.55))
    (stroke (width 0) (type default))
    (uuid 567c51a7-317e-4e39-bb4c-bc7308877093)
  )
  (wire (pts (xy 121.92 57.15) (xy 121.92 60.96))
    (stroke (width 0) (type default))
    (uuid 610a57cf-8562-4263-a7c9-3b63df47d291)
  )
  (wire (pts (xy 121.92 105.41) (xy 76.2 105.41))
    (stroke (width 0) (type default))
    (uuid 86dea077-a4cb-46f5-a192-e42670dda711)
  )
  (wire (pts (xy 148.59 93.98) (xy 148.59 104.14))
    (stroke (width 0) (type default))
    (uuid 9bc2d134-2f27-4923-8162-4b3a98813a3d)
  )
  (wire (pts (xy 148.59 82.55) (xy 148.59 86.36))
    (stroke (width 0) (type default))
    (uuid 9f59b1bf-8d2e-49ab-aae8-f0269cf5a6dc)
  )
  (wire (pts (xy 121.92 52.07) (xy 121.92 57.15))
    (stroke (width 0) (type default))
    (uuid aa679fc1-3e24-4d68-9d48-1d72965f0843)
  )
  (wire (pts (xy 76.2 90.17) (xy 121.92 90.17))
    (stroke (width 0) (type default))
    (uuid b1758c64-b12c-47f0-9bc7-239b2fbb70b5)
  )
  (wire (pts (xy 148.59 82.55) (xy 148.59 77.47))
    (stroke (width 0) (type default))
    (uuid ba233d38-40bf-4bd3-8fe1-a38e1cc6f344)
  )
  (wire (pts (xy 121.92 68.58) (xy 121.92 77.47))
    (stroke (width 0) (type default))
    (uuid c79b3244-1e0c-4592-b4e0-578f8e04cce4)
  )
  (wire (pts (xy 148.59 69.85) (xy 148.59 57.15))
    (stroke (width 0) (type default))
    (uuid ff094d4f-b250-4ddd-b34f-e85c369c212f)
  )

  (text "Needs separate calibration \nValid only for 0-1K1 Ohm, maybe a bit more"
    (at 52.07 60.96 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 7b154bae-e249-4da7-9604-46ca4b7d0e4a)
  )

  (global_label "REG_3.3V+" (shape bidirectional) (at 121.92 52.07 90) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 6f4ecf06-442c-47dc-bc3f-15b26a5ffe62)
    (property "Intersheetrefs" "${INTERSHEET_REFS}" (at 121.92 38.5245 90)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
  )

  (hierarchical_label "Analog_OUT" (shape output) (at 76.2 90.17 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 5b413346-2228-4eb4-99e3-9b436b61a27a)
  )
  (hierarchical_label "Analog_IN" (shape input) (at 76.2 105.41 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid dd6e42dd-8418-4d90-adfe-d65fe3ba7fc9)
  )

  (symbol (lib_id "Diode:PMEG3010EH") (at 121.92 101.6 90) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 2932dcf6-a694-48e6-8e5f-75f95f7922ad)
    (property "Reference" "D3" (at 124.46 101.2825 90)
      (effects (font (size 1.27 1.27)) (justify right))
    )
    (property "Value" "PMEG3010EH" (at 124.46 103.8225 90)
      (effects (font (size 1.27 1.27)) (justify right))
    )
    (property "Footprint" "Diode_SMD:D_SOD-123F" (at 126.365 101.6 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "https://assets.nexperia.com/documents/data-sheet/PMEG3010EH_EJ_ET.pdf" (at 121.92 101.6 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 0c267b84-2df0-4456-82ad-586120e39eec))
    (pin "2" (uuid 72e250f2-2de6-4a50-a130-5d055ffdf1d9))
    (instances
      (project "VXDash"
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/30c765e9-a1bd-41b1-86c9-2f6fc8c60940"
          (reference "D7") (unit 1)
        )
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/e43ed556-c833-485f-a016-421bbb71c57f"
          (reference "D8") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:R") (at 148.59 90.17 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 377b30d3-0314-40a1-a3b2-b728512e7f34)
    (property "Reference" "R48" (at 151.13 89.535 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "3K3" (at 151.13 92.075 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Resistor_SMD:R_0603_1608Metric" (at 146.812 90.17 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 148.59 90.17 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 8ff75a3d-5656-4b54-8d9c-4f68b0900249))
    (pin "2" (uuid bbee2b32-f1f3-417e-9848-8978d2d574da))
    (instances
      (project "VXDash"
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/30c765e9-a1bd-41b1-86c9-2f6fc8c60940"
          (reference "R52") (unit 1)
        )
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/e43ed556-c833-485f-a016-421bbb71c57f"
          (reference "R71") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:R") (at 121.92 64.77 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 63259e1f-d5be-45a1-8cfd-122d566344f7)
    (property "Reference" "R66" (at 124.46 64.135 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "510R" (at 124.46 66.675 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Resistor_SMD:R_0603_1608Metric" (at 120.142 64.77 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 121.92 64.77 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 926c0902-33f1-4cca-8eb6-72f69e671257))
    (pin "2" (uuid 9c99f36c-3011-4a34-a4f3-b9cc46a2c35b))
    (instances
      (project "VXDash"
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/30c765e9-a1bd-41b1-86c9-2f6fc8c60940"
          (reference "R70") (unit 1)
        )
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/e43ed556-c833-485f-a016-421bbb71c57f"
          (reference "R58") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "power:GND") (at 148.59 104.14 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 69673be8-ef1c-499b-a319-97817aab6eac)
    (property "Reference" "#PWR07" (at 148.59 110.49 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "GND" (at 151.13 105.4099 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "" (at 148.59 104.14 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 148.59 104.14 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 7490211c-c3f3-49a1-9372-70b08edd0bd6))
    (instances
      (project "DashSpy"
        (path "/215a03d8-0cac-4df9-aae9-9174d39cedfe"
          (reference "#PWR07") (unit 1)
        )
      )
      (project "VXDash"
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef"
          (reference "#PWR09") (unit 1)
        )
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/30c765e9-a1bd-41b1-86c9-2f6fc8c60940"
          (reference "#PWR062") (unit 1)
        )
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/e43ed556-c833-485f-a016-421bbb71c57f"
          (reference "#PWR063") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Transistor_BJT:BC807") (at 124.46 82.55 180) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 8f544551-0f61-439e-8d3a-4c5cce8fc18d)
    (property "Reference" "Q3" (at 119.38 81.915 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "BC807" (at 119.38 84.455 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Package_TO_SOT_SMD:SOT-23" (at 119.38 80.645 0)
      (effects (font (size 1.27 1.27) italic) (justify left) hide)
    )
    (property "Datasheet" "https://www.onsemi.com/pub/Collateral/BC808-D.pdf" (at 124.46 82.55 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
    (pin "1" (uuid 48cbf541-1cb7-4042-883f-80df463f0620))
    (pin "2" (uuid afcf1991-25a0-43c7-8476-32c7402c04e0))
    (pin "3" (uuid 50a364cf-e1fb-4cd1-a5f6-0f52a06e405d))
    (instances
      (project "VXDash"
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/30c765e9-a1bd-41b1-86c9-2f6fc8c60940"
          (reference "Q7") (unit 1)
        )
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/e43ed556-c833-485f-a016-421bbb71c57f"
          (reference "Q8") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:R") (at 148.59 73.66 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid caa58a6f-f437-4efe-8963-d5b74d7fdab1)
    (property "Reference" "R53" (at 151.13 73.025 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "2K2" (at 151.13 75.565 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Resistor_SMD:R_0603_1608Metric" (at 146.812 73.66 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 148.59 73.66 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 197759bc-2dea-417e-888f-d7275b39d3a4))
    (pin "2" (uuid c5b25d94-84ca-4acc-a864-4972a9f24fd4))
    (instances
      (project "VXDash"
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/30c765e9-a1bd-41b1-86c9-2f6fc8c60940"
          (reference "R57") (unit 1)
        )
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/e43ed556-c833-485f-a016-421bbb71c57f"
          (reference "R59") (unit 1)
        )
      )
    )
  )
)
