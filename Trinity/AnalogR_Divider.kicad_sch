(kicad_sch (version 20230121) (generator eeschema)

  (uuid 4a88724c-c54c-420c-823e-e5b2fafda75e)

  (paper "A4")

  (title_block
    (title "Low R sensing circuit")
    (date "2023-05-01")
    (rev "1.2")
    (comment 1 "https://github.com/martinroger/VXDash")
    (comment 2 "https://cadlab.io/projects/vxdash")
  )

  (lib_symbols
    (symbol "Device:R" (pin_numbers hide) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "R" (at 2.032 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "R" (at 0 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at -1.778 0 90)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "R res resistor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Resistor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "R_*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "R_0_1"
        (rectangle (start -1.016 -2.54) (end 1.016 2.54)
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
      )
      (symbol "R_1_1"
        (pin passive line (at 0 3.81 270) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Diode:PMEG3010EH" (pin_numbers hide) (pin_names hide) (in_bom yes) (on_board yes)
      (property "Reference" "D" (at 0 2.54 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "PMEG3010EH" (at 0 -2.54 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "Diode_SMD:D_SOD-123F" (at 0 -4.445 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "https://assets.nexperia.com/documents/data-sheet/PMEG3010EH_EJ_ET.pdf" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "forward voltage diode" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "30V, 1A very low Vf MEGA Schottky barrier rectifier, SOD-123F" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "D*SOD?123F*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "PMEG3010EH_0_1"
        (polyline
          (pts
            (xy 1.27 0)
            (xy -1.27 0)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 1.27 1.27)
            (xy 1.27 -1.27)
            (xy -1.27 0)
            (xy 1.27 1.27)
          )
          (stroke (width 0.2032) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -1.905 0.635)
            (xy -1.905 1.27)
            (xy -1.27 1.27)
            (xy -1.27 -1.27)
            (xy -0.635 -1.27)
            (xy -0.635 -0.635)
          )
          (stroke (width 0.2032) (type default))
          (fill (type none))
        )
      )
      (symbol "PMEG3010EH_1_1"
        (pin passive line (at -3.81 0 0) (length 2.54)
          (name "K" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 3.81 0 180) (length 2.54)
          (name "A" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Transistor_BJT:BC807" (pin_names (offset 0) hide) (in_bom yes) (on_board yes)
      (property "Reference" "Q" (at 5.08 1.905 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "BC807" (at 5.08 0 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "Package_TO_SOT_SMD:SOT-23" (at 5.08 -1.905 0)
        (effects (font (size 1.27 1.27) italic) (justify left) hide)
      )
      (property "Datasheet" "https://www.onsemi.com/pub/Collateral/BC808-D.pdf" (at 0 0 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "ki_keywords" "PNP Transistor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "0.8A Ic, 45V Vce, PNP Transistor, SOT-23" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "SOT?23*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "BC807_0_1"
        (polyline
          (pts
            (xy 0.635 0.635)
            (xy 2.54 2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0.635 -0.635)
            (xy 2.54 -2.54)
            (xy 2.54 -2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0.635 1.905)
            (xy 0.635 -1.905)
            (xy 0.635 -1.905)
          )
          (stroke (width 0.508) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 2.286 -1.778)
            (xy 1.778 -2.286)
            (xy 1.27 -1.27)
            (xy 2.286 -1.778)
            (xy 2.286 -1.778)
          )
          (stroke (width 0) (type default))
          (fill (type outline))
        )
        (circle (center 1.27 0) (radius 2.8194)
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
      )
      (symbol "BC807_1_1"
        (pin input line (at -5.08 0 0) (length 5.715)
          (name "B" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 2.54 -5.08 90) (length 2.54)
          (name "E" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 2.54 5.08 270) (length 2.54)
          (name "C" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "power:GND" (power) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (at 0 -6.35 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Value" "GND" (at 0 -3.81 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "global power" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Power symbol creates a global label with name \"GND\" , ground" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "GND_0_1"
        (polyline
          (pts
            (xy 0 0)
            (xy 0 -1.27)
            (xy 1.27 -1.27)
            (xy 0 -2.54)
            (xy -1.27 -1.27)
            (xy 0 -1.27)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "GND_1_1"
        (pin power_in line (at 0 0 270) (length 0) hide
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
      )
    )
  )

  (junction (at 170.18 93.98) (diameter 0) (color 0 0 0 0)
    (uuid 31beb4b4-685b-4bd0-849d-fa024b039f62)
  )
  (junction (at 143.51 68.58) (diameter 0) (color 0 0 0 0)
    (uuid 527f4acc-83db-4379-b7ea-a72d2cbb7e73)
  )
  (junction (at 143.51 106.68) (diameter 0) (color 0 0 0 0)
    (uuid b1c072b4-6179-4829-a0f6-54b29778d80d)
  )

  (wire (pts (xy 143.51 64.77) (xy 143.51 68.58))
    (stroke (width 0) (type default))
    (uuid 078dd792-9b85-4351-9b35-4dcb323fdd5a)
  )
  (wire (pts (xy 170.18 105.41) (xy 170.18 115.57))
    (stroke (width 0) (type default))
    (uuid 094affb2-614c-42b0-b9e2-ca9326dbc00f)
  )
  (wire (pts (xy 170.18 81.28) (xy 170.18 68.58))
    (stroke (width 0) (type default))
    (uuid 12fa60cb-691e-4e59-9f36-366c5375b20c)
  )
  (wire (pts (xy 170.18 93.98) (xy 170.18 88.9))
    (stroke (width 0) (type default))
    (uuid 33e2691b-7016-4c8d-ab72-674ece067940)
  )
  (wire (pts (xy 143.51 109.22) (xy 143.51 106.68))
    (stroke (width 0) (type default))
    (uuid 36e32e3b-bd89-49f1-8af4-268108d5c927)
  )
  (wire (pts (xy 170.18 93.98) (xy 170.18 97.79))
    (stroke (width 0) (type default))
    (uuid 3a074e53-25f4-45be-9049-8207de4ba8a8)
  )
  (wire (pts (xy 143.51 80.01) (xy 143.51 88.9))
    (stroke (width 0) (type default))
    (uuid 4ce2349f-e288-43d2-929a-a104428d7a76)
  )
  (wire (pts (xy 143.51 99.06) (xy 143.51 106.68))
    (stroke (width 0) (type default))
    (uuid 620e8082-40b6-4375-b41a-272aef17db0d)
  )
  (wire (pts (xy 143.51 68.58) (xy 143.51 72.39))
    (stroke (width 0) (type default))
    (uuid b5a504e3-5cbd-459a-9467-4e32692b7539)
  )
  (wire (pts (xy 143.51 106.68) (xy 116.84 106.68))
    (stroke (width 0) (type default))
    (uuid c88b127c-a55f-4692-9577-e2fbc0f091cb)
  )
  (wire (pts (xy 143.51 116.84) (xy 116.84 116.84))
    (stroke (width 0) (type default))
    (uuid e4ba138a-91b7-4580-9316-0db09e7e3bd2)
  )
  (wire (pts (xy 151.13 93.98) (xy 170.18 93.98))
    (stroke (width 0) (type default))
    (uuid ec6ad4ac-5f50-49fb-8ff7-76dd1bc4fec9)
  )
  (wire (pts (xy 170.18 68.58) (xy 143.51 68.58))
    (stroke (width 0) (type default))
    (uuid f148626d-d599-4a1f-8008-c109ca0656d4)
  )

  (text "Needs separate calibration \nValid only for 0-250Ohm, maybe a bit more"
    (at 15.24 20.32 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 50f9c4e2-4a0e-4b90-a774-4beae3becd52)
  )

  (global_label "REG_3.3V+" (shape bidirectional) (at 143.51 64.77 90) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid f2454e2b-b4a5-4dab-92b4-853ba6c88b63)
    (property "Intersheetrefs" "${INTERSHEET_REFS}" (at 143.51 51.2245 90)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
  )

  (hierarchical_label "Analog_OUT" (shape output) (at 116.84 106.68 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 652b343d-ab9e-49d4-a307-25768611fe5e)
  )
  (hierarchical_label "Analog_IN" (shape input) (at 116.84 116.84 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid fb71ab4c-6a61-4d52-ac0f-fd08c5081fc2)
  )

  (symbol (lib_id "Diode:PMEG3010EH") (at 143.51 113.03 90) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 0391323d-747d-43dd-9fb4-57493cccb634)
    (property "Reference" "D3" (at 146.05 112.7125 90)
      (effects (font (size 1.27 1.27)) (justify right))
    )
    (property "Value" "PMEG3010EH" (at 146.05 115.2525 90)
      (effects (font (size 1.27 1.27)) (justify right))
    )
    (property "Footprint" "Diode_SMD:D_SOD-123F" (at 147.955 113.03 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "https://assets.nexperia.com/documents/data-sheet/PMEG3010EH_EJ_ET.pdf" (at 143.51 113.03 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 1a4ed923-7b22-4acb-9e73-b6091492b28d))
    (pin "2" (uuid 06d3c68c-b67e-4c8e-b8c8-f2790376f402))
    (instances
      (project "VXDash"
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/30c765e9-a1bd-41b1-86c9-2f6fc8c60940"
          (reference "D7") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Transistor_BJT:BC807") (at 146.05 93.98 180) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 450b60f7-4aa5-4108-bfce-7d6d5292151e)
    (property "Reference" "Q3" (at 140.97 93.345 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "BC807" (at 140.97 95.885 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Package_TO_SOT_SMD:SOT-23" (at 140.97 92.075 0)
      (effects (font (size 1.27 1.27) italic) (justify left) hide)
    )
    (property "Datasheet" "https://www.onsemi.com/pub/Collateral/BC808-D.pdf" (at 146.05 93.98 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
    (pin "1" (uuid b65f1201-bfab-49dc-a4a0-0c62e37557d2))
    (pin "2" (uuid 0c63e69d-715a-42b8-8ee0-024206235a61))
    (pin "3" (uuid 43611997-9db8-4562-a41d-3efc2b4b8f12))
    (instances
      (project "VXDash"
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/30c765e9-a1bd-41b1-86c9-2f6fc8c60940"
          (reference "Q7") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "power:GND") (at 170.18 115.57 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 5ef5c7e8-1522-46b8-826f-b673ff0d0fd4)
    (property "Reference" "#PWR07" (at 170.18 121.92 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "GND" (at 172.72 116.8399 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "" (at 170.18 115.57 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 170.18 115.57 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 38b48891-cfb4-4e81-a32d-47e79003a02c))
    (instances
      (project "DashSpy"
        (path "/215a03d8-0cac-4df9-aae9-9174d39cedfe"
          (reference "#PWR07") (unit 1)
        )
      )
      (project "VXDash"
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef"
          (reference "#PWR09") (unit 1)
        )
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/30c765e9-a1bd-41b1-86c9-2f6fc8c60940"
          (reference "#PWR062") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:R") (at 170.18 101.6 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 89cef0a1-ff24-4073-a965-274e355e11a3)
    (property "Reference" "R48" (at 172.72 100.965 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "3K3" (at 172.72 103.505 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Resistor_SMD:R_0603_1608Metric" (at 168.402 101.6 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 170.18 101.6 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid db38f20e-694f-4e36-a933-cdbcec847820))
    (pin "2" (uuid d1b109a0-5869-4da0-9c70-a7833a610a41))
    (instances
      (project "VXDash"
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/30c765e9-a1bd-41b1-86c9-2f6fc8c60940"
          (reference "R52") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:R") (at 143.51 76.2 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid e87e1fa0-65d8-4e04-8d23-4d74d7ba9f11)
    (property "Reference" "R66" (at 146.05 75.565 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "270R" (at 146.05 78.105 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Resistor_SMD:R_0603_1608Metric" (at 141.732 76.2 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 143.51 76.2 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 1702fd35-917e-4062-88da-56e6722b295d))
    (pin "2" (uuid 5958b660-0e67-4829-9621-45cdc05374cb))
    (instances
      (project "VXDash"
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/30c765e9-a1bd-41b1-86c9-2f6fc8c60940"
          (reference "R70") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:R") (at 170.18 85.09 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid f0f3b9ea-2fe4-41fb-9ffc-8729498484d2)
    (property "Reference" "R53" (at 172.72 84.455 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "2K2" (at 172.72 86.995 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Resistor_SMD:R_0603_1608Metric" (at 168.402 85.09 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 170.18 85.09 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid f5d67af5-f4be-4637-b146-97894521fede))
    (pin "2" (uuid 1f777b08-9e8b-4c79-aa6f-94346e3b3e24))
    (instances
      (project "VXDash"
        (path "/f2858fc4-50de-4ff0-a01c-5b985ee14aef/30c765e9-a1bd-41b1-86c9-2f6fc8c60940"
          (reference "R57") (unit 1)
        )
      )
    )
  )
)
